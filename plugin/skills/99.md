# /99 — AI Pair Programming Mode

Inspired by ThePrimeagen's 99 Neovim agent, adapted for NEXUS and Claude Code.
NOT a Neovim plugin — this runs inside Claude Code and the `buildwithnexus` CLI.

## Activation

When the user types `/99` (with or without arguments), enter pair-programming mode immediately.

## What /99 Does

Activates an AI pair-programming session backed by the full NEXUS 56-agent engine.
The Chief of Staff routes your request to the appropriate engineers, who analyze,
plan, and execute targeted code changes in real time.

## Context Loading

On activation, automatically load context in this order:

1. **AGENT.md** — project-level agent rules (look in cwd and up to repo root)
2. **SKILL.md** — project-level skill definitions (same search)
3. **CLAUDE.md** — Claude Code project instructions
4. **Current file** — if the user is editing a file, read it for context

Report which context files were loaded before starting the session.

## Prefix Syntax

- `#<rulefile>` — load a rules file into context (e.g. `#security-rules`)
- `@<filepath>` — attach a file to the request (e.g. `@src/auth/login.ts`)

Multiple prefixes can be combined: `@src/auth.ts @src/db.ts refactor to use prepared statements`

## Commands

### `/99` (no args) — Interactive pair-programming session
Enter a continuous REPL loop:
```
99 ❯ describe what you want changed
```
The Chief of Staff routes to the right engineers. Show agent activity as it streams.
Type `exit`, `quit`, or press Ctrl+C to end the session.

### `/99 edit <file> [instruction]`
Open an AI-assisted editing session for a specific file.
- Read the file
- Show a summary of what the file does
- Ask what change to make (or use the provided instruction)
- Route to the appropriate engineer(s) via NEXUS
- Show the resulting diff before applying

### `/99 search <query>`
Contextual codebase search backed by NEXUS analysis.
- Search for the query across the codebase
- Use the NEXUS tech lead to explain what the results mean
- Suggest which files are most relevant to modify

### `/99 debug`
Debug the current issue with NEXUS agent assistance.
- Read the error context (last error, current file, test output)
- Route to the NEXUS debugger agent chain
- Get a root cause analysis and suggested fix
- Show the fix as a diff

## Session Display Format

```
  99 ❯ refactor the auth module to use refresh tokens

  Chief of Staff    Routing to engineering team...
  Tech Lead         Analyzing auth module structure...
  Backend Dev       Designing refresh token schema...
  Backend Dev       Implementing token rotation logic...
  Security          Reviewing for token leakage vectors...
  Code Reviewer     Approving changes...
  ✓ Complete        3 files modified
```

Each agent line appears as that agent completes its work — streaming, not batched.

## Message Format to NEXUS Engine

Send requests to the NEXUS `/message` endpoint with source `"99"`:

```json
{
  "message": "[99] <instruction>",
  "source": "99",
  "context": {
    "files": ["<attached files>"],
    "rules": ["<loaded rule files>"],
    "cwd": "<working directory>"
  }
}
```

## Error Handling

- If NEXUS engine is unreachable: fall back to direct Claude Code execution without agent routing
- If a file referenced with `@` does not exist: warn and continue without it
- If `#<rulefile>` is not found: warn and continue

## Homage

This skill is a terminal-native homage to ThePrimeagen's 99 Neovim AI agent
(https://github.com/ThePrimeagen/99). Same spirit — AI that understands your
codebase and edits it alongside you — adapted for the NEXUS multi-agent engine
and Claude Code's tool ecosystem.
